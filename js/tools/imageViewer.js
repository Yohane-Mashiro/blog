export default function imageViewer(){let e=!1,t=1,n=!1,r=!1,a=0,i=0,s=0,o=0,l=0;const c=document.querySelector(".image-viewer-container");if(c){const m=c.querySelector("img");if(m){const u=e=>{document.body.style.overflow=e?"hidden":"auto",e?c.classList.add("active"):c.classList.remove("active")};let v=0;var d=e=>{n&&e.stopPropagation(),n=!1,m.style.cursor="grab"};m.addEventListener("wheel",(e=>{e.preventDefault();var n=m.getBoundingClientRect(),r=e.clientX-n.left,a=e.clientY-n.top,r=r-n.width/2,a=a-n.height/2,n=t;t+=-.001*e.deltaY,n<(t=Math.min(Math.max(.8,t),4))?(o-=r*(t-n),l-=a*(t-n)):(o=0,l=0),m.style.transform=`translate(${o}px, ${l}px) scale(${t})`}),{passive:!1}),m.addEventListener("mousedown",(e=>{e.preventDefault(),n=!0,i=e.clientX,s=e.clientY,m.style.cursor="grabbing"}),{passive:!1}),m.addEventListener("mousemove",(e=>{var a,c;!n||(a=(new Date).getTime())-v<100||(v=a,a=e.clientX-i,c=e.clientY-s,o+=a,l+=c,i=e.clientX,s=e.clientY,m.style.transform=`translate(${o}px, ${l}px) scale(${t})`,r=!0)}),{passive:!1}),m.addEventListener("mouseup",d,{passive:!1}),m.addEventListener("mouseleave",d,{passive:!1}),c.addEventListener("click",(n=>{r||(e=!1,u(e),t=1,o=0,l=0,m.style.transform=`translate(${o}px, ${l}px) scale(${t})`),r=!1}));const g=document.querySelectorAll(".markdown-body img, .masonry-item img, #shuoshuo-content img"),y=n=>{"Escape"===n.key&&e&&(e=!1,u(e),t=1,o=0,l=0,m.style.transform=`translate(${o}px, ${l}px) scale(${t})`,document.removeEventListener("keydown",y))};0<g.length&&(g.forEach(((t,n)=>{t.addEventListener("click",(()=>{a=n,e=!0,u(e),m.src=t.src,document.addEventListener("keydown",y)}))})),document.addEventListener("keydown",(t=>{if(e){if("ArrowUp"===t.key||"ArrowLeft"===t.key)a=(a-1+g.length)%g.length;else{if("ArrowDown"!==t.key&&"ArrowRight"!==t.key)return;a=(a+1)%g.length}t=g[a];let e=t.src;t.hasAttribute("lazyload")&&(e=t.getAttribute("data-src"),t.src=e,t.removeAttribute("lazyload")),m.src=e}})))}else console.warn("Target image not found in image viewer container. Exiting imageViewer function.")}else console.warn("Image viewer container not found. Exiting imageViewer function.")}