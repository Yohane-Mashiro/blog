export default function imageViewer(){let e=false;let t=1;let n=false;let s=false;let r=0;let o=0;let a=0;let i=0;let l=0;const c=document.querySelector(".image-viewer-container");if(!c){console.warn("Image viewer container not found. Exiting imageViewer function.");return}const d=c.querySelector("img");if(!d){console.warn("Target image not found in image viewer container. Exiting imageViewer function.");return}const f=e=>{document.body.style.overflow=e?"hidden":"auto";e?c.classList.add("active"):c.classList.remove("active")};const u=e=>{e.preventDefault();const n=d.getBoundingClientRect();const s=e.clientX-n.left;const r=e.clientY-n.top;const o=s-n.width/2;const a=r-n.height/2;const c=t;t+=e.deltaY*-.001;t=Math.min(Math.max(.8,t),4);if(c<t){i-=o*(t-c);l-=a*(t-c)}else{i=0;l=0}d.style.transform=`translate(${i}px, ${l}px) scale(${t})`};const m=e=>{e.preventDefault();n=true;o=e.clientX;a=e.clientY;d.style.cursor="grabbing"};let g=0;const v=100;const y=e=>{if(n){const n=(new Date).getTime();if(n-g<v){return}g=n;const r=e.clientX-o;const c=e.clientY-a;i+=r;l+=c;o=e.clientX;a=e.clientY;d.style.transform=`translate(${i}px, ${l}px) scale(${t})`;s=true}};const p=e=>{if(n){e.stopPropagation()}n=false;d.style.cursor="grab"};d.addEventListener("wheel",u,{passive:false});d.addEventListener("mousedown",m,{passive:false});d.addEventListener("mousemove",y,{passive:false});d.addEventListener("mouseup",p,{passive:false});d.addEventListener("mouseleave",p,{passive:false});c.addEventListener("click",(n=>{if(!s){e=false;f(e);t=1;i=0;l=0;d.style.transform=`translate(${i}px, ${l}px) scale(${t})`}s=false}));const w=document.querySelectorAll(".markdown-body img, .masonry-item img, #shuoshuo-content img");const h=n=>{if(n.key==="Escape"&&e){e=false;f(e);t=1;i=0;l=0;d.style.transform=`translate(${i}px, ${l}px) scale(${t})`;document.removeEventListener("keydown",h)}};if(w.length>0){w.forEach(((t,n)=>{t.addEventListener("click",(()=>{r=n;e=true;f(e);d.src=t.src;document.addEventListener("keydown",h)}))}));const t=t=>{if(!e)return;if(t.key==="ArrowUp"||t.key==="ArrowLeft"){r=(r-1+w.length)%w.length}else if(t.key==="ArrowDown"||t.key==="ArrowRight"){r=(r+1)%w.length}else{return}const n=w[r];let s=n.src;if(n.hasAttribute("lazyload")){s=n.getAttribute("data-src");n.src=s;n.removeAttribute("lazyload")}d.src=s};document.addEventListener("keydown",t)}else{}}